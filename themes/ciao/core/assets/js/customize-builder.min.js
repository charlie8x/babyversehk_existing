!function(c,e){"use strict";if(!window.wp||!window.wp.customize)throw new ReferenceError("WordPress Customizer Javascript API is not accessible!");e.zoo=e.zoo||{};var u=wp.customize,p=c(document),t={setAttachment:function(e){this.attachment=e},addParamsURL:function(e,t){return c.isEmptyObject(t)||(e+=(0<=e.indexOf("?")?"&":"?")+c.param(t)),e},getThumb:function(e){void 0!==e&&(this.attachment=e);e=(new Date).getTime();return void 0!==this.attachment.sizes&&void 0!==this.attachment.sizes.medium?this.addParamsURL(this.attachment.sizes.medium.url,{t:e}):this.addParamsURL(this.attachment.url,{t:e})},getURL:function(e){void 0!==e&&(this.attachment=e);e=(new Date).getTime();return this.addParamsURL(this.attachment.url,{t:e})},getID:function(e){return void 0!==e&&(this.attachment=e),this.attachment.id},getInputID:function(e){c(".attachment-id",this.preview).val()},setPreview:function(e){this.preview=e},insertImage:function(e){void 0!==e&&(this.attachment=e);var t=this.getURL(),i=this.getID(),e=this.attachment.mime;c(".zoo-image-preview",this.preview).addClass("zoo-has-file").html('<img src="'+t+'" alt="">'),c(".attachment-url",this.preview).val(this.toRelativeUrl(t)),c(".attachment-mime",this.preview).val(e),c(".attachment-id",this.preview).val(i).trigger("change"),this.preview.addClass("attachment-added"),this.showChangeBtn()},toRelativeUrl:function(e){return e},showChangeBtn:function(){c(".zoo-add",this.preview).addClass("zoo-hide"),c(".zoo-change",this.preview).removeClass("zoo-hide"),c(".zoo-remove",this.preview).removeClass("zoo-hide")},insertVideo:function(e){void 0!==e&&(this.attachment=e);var t=this.getURL(),i=this.getID(),a=this.attachment.mime,e='<video width="100%" height="" controls><source src="'+t+'" type="'+a+'">Your browser does not support the video tag.</video>';c(".zoo-image-preview",this.preview).addClass("zoo-has-file").html(e),c(".attachment-url",this.preview).val(this.toRelativeUrl(t)),c(".attachment-mime",this.preview).val(a),c(".attachment-id",this.preview).val(i).trigger("change"),this.preview.addClass("attachment-added"),this.showChangeBtn()},insertFile:function(e){void 0!==e&&(this.attachment=e);var t=e.url,i=this.attachment.mime,e=t.replace(/^.*[\\\/]/,"");c(".zoo-image-preview",this.preview).addClass("zoo-has-file").html('<a href="'+t+'" class="attachment-file" target="_blank">'+e+"</a>"),c(".attachment-url",this.preview).val(this.toRelativeUrl(t)),c(".attachment-mime",this.preview).val(i),c(".attachment-id",this.preview).val(this.getID()).trigger("change"),this.preview.addClass("attachment-added"),this.showChangeBtn()},remove:function(e){void 0!==e&&(this.preview=e),c(".zoo-image-preview",this.preview).removeAttr("style").html("").removeClass("zoo-has-file"),c(".attachment-url",this.preview).val(""),c(".attachment-mime",this.preview).val(""),c(".attachment-id",this.preview).val("").trigger("change"),this.preview.removeClass("attachment-added"),c(".zoo-add",this.preview).removeClass("zoo-hide"),c(".zoo-change",this.preview).addClass("zoo-hide"),c(".zoo-remove",this.preview).addClass("zoo-hide")}};t.controlMediaImage=wp.media({title:wp.media.view.l10n.addMedia,multiple:!1,library:{type:"image"}}),t.controlMediaImage.on("select",function(){var e=t.controlMediaImage.state().get("selection").first().toJSON();t.insertImage(e)}),t.controlMediaVideo=wp.media({title:wp.media.view.l10n.addMedia,multiple:!1,library:{type:"video"}}),t.controlMediaVideo.on("select",function(){var e=t.controlMediaVideo.state().get("selection").first().toJSON();t.insertVideo(e)}),t.controlMediaFile=wp.media({title:wp.media.view.l10n.addMedia,multiple:!1}),t.controlMediaFile.on("select",function(){var e=t.controlMediaFile.state().get("selection").first().toJSON();t.insertFile(e)});var a={},s={devices:["desktop","mobile"],allDevices:["desktop","mobile"],type:"zoo",getTemplate:_.memoize(function(){var a=this,o={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e,t,i){return _.isUndefined(t)&&(t="tmpl-zoo-customize-control-"+a.type),_.template(c("#"+t).html(),null,o)(e)}}),getFieldValue:function(a,e,o){var t=this,i=void 0,n=!1;_.isUndefined(e)||(i=e.type,n=e.device_settings);var s,l="";switch(i){case"media":case"image":case"video":case"attachment":case"audio":n?(l={},_.each(t.allDevices,function(e){var t=a+"-"+e;l[e]={id:c('input[data-name="'+t+'"]',o).val(),url:c('input[data-name="'+t+'-url"]',o).val(),mime:c('input[data-name="'+t+'-mime"]',o).val()}})):l={id:c('input[data-name="'+a+'"]',o).val(),url:c('input[data-name="'+a+'-url"]',o).val(),mime:c('input[data-name="'+a+'-mime"]',o).val()};break;case"css_rule":n?(l={},_.each(t.allDevices,function(e){var t=a+"-"+e;l[e]={unit:c('input[data-name="'+t+'-unit"]:checked',o).val(),top:c('input[data-name="'+t+'-top"]',o).val(),right:c('input[data-name="'+t+'-right"]',o).val(),bottom:c('input[data-name="'+t+'-bottom"]',o).val(),left:c('input[data-name="'+t+'-left"]',o).val(),link:c('input[data-name="'+t+'-link"]',o).is(":checked")?1:""}})):l={unit:c('input[data-name="'+a+'-unit"]:checked',o).val(),top:c('input[data-name="'+a+'-top"]',o).val(),right:c('input[data-name="'+a+'-right"]',o).val(),bottom:c('input[data-name="'+a+'-bottom"]',o).val(),left:c('input[data-name="'+a+'-left"]',o).val(),link:c('input[data-name="'+a+'-link"]',o).is(":checked")?1:""};break;case"shadow":n?(l={},_.each(t.allDevices,function(e){var t=a+"-"+e;l[e]={color:c('input[data-name="'+t+'-color"]',o).val(),x:c('input[data-name="'+t+'-x"]',o).val(),y:c('input[data-name="'+t+'-y"]',o).val(),blur:c('input[data-name="'+t+'-blur"]',o).val(),spread:c('input[data-name="'+t+'-spread"]',o).val(),inset:!!c('input[data-name="'+t+'-inset"]',o).is(":checked")&&1}})):l={color:c('input[data-name="'+a+'-color"]',o).val(),x:c('input[data-name="'+a+'-x"]',o).val(),y:c('input[data-name="'+a+'-y"]',o).val(),blur:c('input[data-name="'+a+'-blur"]',o).val(),spread:c('input[data-name="'+a+'-spread"]',o).val(),inset:!!c('input[data-name="'+a+'-inset"]',o).is(":checked")&&1};break;case"font_style":n?(l={},_.each(t.allDevices,function(e){var t=a+"-"+e;l[e]={b:c('input[data-name="'+t+'-b"]',o).is(":checked")?1:"",i:c('input[data-name="'+t+'-i"]',o).is(":checked")?1:"",u:c('input[data-name="'+t+'-u"]',o).is(":checked")?1:"",s:c('input[data-name="'+t+'-s"]',o).is(":checked")?1:"",t:c('input[data-name="'+t+'-t"]',o).is(":checked")?1:""}})):l={b:c('input[data-name="'+a+'-b"]',o).is(":checked")?1:"",i:c('input[data-name="'+a+'-i"]',o).is(":checked")?1:"",u:c('input[data-name="'+a+'-u"]',o).is(":checked")?1:"",s:c('input[data-name="'+a+'-s"]',o).is(":checked")?1:"",t:c('input[data-name="'+a+'-t"]',o).is(":checked")?1:""};break;case"font":n?(l={},_.each(t.allDevices,function(e){var t=a+"-"+e,i={};c('.list-subsets[data-name="'+t+'-subsets"] input',o).each(function(){var e;c(this).is(":checked")&&(e=c(this).val(),i[e]=e)}),l[e]={font:c('select[data-name="'+t+'-font"]',o).val(),type:c('input[data-name="'+t+'-type"]',o).val(),variant:c('select[data-name="'+t+'-variant"]',o).val(),subsets:i}})):(s={},c('.list-subsets[data-name="'+a+'-subsets"] input',o).each(function(){var e;c(this).is(":checked")&&(e=c(this).val(),s[e]=e)}),l={font:c('select[data-name="'+a+'-font"]',o).val(),type:c('input[data-name="'+a+'-type"]',o).val(),variant:c('select[data-name="'+a+'-variant"]',o).val(),subsets:s});break;case"slider":n?(l={},_.each(t.allDevices,function(e){var t=a+"-"+e;l[e]={unit:c('input[data-name="'+t+'-unit"]:checked',o).val(),value:c('input[data-name="'+t+'-value"]',o).val()}})):l={unit:c('input[data-name="'+a+'-unit"]:checked',o).val(),value:c('input[data-name="'+a+'-value"]',o).val()};break;case"icon":n?(l={},_.each(t.allDevices,function(e){var t=a+"-"+e;l[e]={type:c('input[data-name="'+t+'-type"]',o).val(),icon:c('input[data-name="'+t+'"]',o).val()}})):l={type:c('input[data-name="'+a+'-type"]',o).val(),icon:c('input[data-name="'+a+'"]',o).val()};break;case"radio":case"text_align":case"text_align_no_justify":n?(l={},_.each(t.allDevices,function(e){var t=c('input[data-name="'+a+"-"+e+'"]:checked',o);l[e]=t.length?t.val():""})):l=c('input[data-name="'+a+'"]:checked',o).val();break;case"checkbox":n?(l={},_.each(t.allDevices,function(e){l[e]=c('input[data-name="'+a+"-"+e+'"]',o).is(":checked")?1:""})):l=c('input[data-name="'+a+'"]',o).is(":checked")?1:"";break;case"checkboxes":l={},n?_.each(t.allDevices,function(e){l[e]={},c('input[data-name="'+a+"-"+e+'"]',o).each(function(){var e=c(this).val();c(this).is(":checked")&&(l[e]=e)})}):c('input[data-name="'+a+'"]',o).each(function(){var e=c(this).val();c(this).is(":checked")&&(l[e]=e)});break;case"typography":case"modal":case"styling":n?(l={},_.each(t.allDevices,function(e){l[e]=c('[data-name="'+a+"-"+e+'"]',o).val()})):l=c('[data-name="'+a+'"]',o).val();try{l=JSON.parse(l)}catch(e){}break;default:n?(l={},_.each(t.allDevices,function(e){l[e]=c('[data-name="'+a+"-"+e+'"]',o).val()})):l=c('[data-name="'+a+'"]',o).val()}return l},getValue:function(n,o){var s=this,l="";switch(n.type){case"group":l={},n.device_settings?_.each(s.allDevices,function(e){var i=c(".zoo-group-device-fields.zoo-for-"+e,o);l[e]={};var a={};_.each(n.fields,function(e){var t=c('.zoo-group-field[data-field-name="'+e.name+'"]',i);a[e.name]=s.getFieldValue(e.name,e,t)}),l[e]=a,s.initConditional(i,a)}):(_.each(n.fields,function(e){var t=c('.zoo-group-field[data-field-name="'+e.name+'"]',o);l[e.name]=s.getFieldValue(e.name,e,t)}),s.initConditional(o,l));break;case"repeater":l=[],c(".zoo-repeater-item",o).each(function(e){var a=c(this),o={};_.each(n.fields,function(e){var t=c('[data-field-name="'+e.name+'"]',a),i=s.getFieldValue(e.name,e,a);o[e.name]=i,n.live_title_field==e.name&&("select"==t.prop("tagName")?i=c('option[value="'+i+'"]').first().text():!_.isUndefined(i)&&""!=i||(i=ZooCustomizeBuilderData.untitled),s.updateRepeaterLiveTitle(i,a,e))}),s.initConditional(a,o),l[e]=o,l[e]._visibility="visible",c("input.r-visible-input",a).length&&(c("input.r-visible-input",a).is(":checked")||(l[e]._visibility="hidden"))});break;default:l=this.getFieldValue(n.name,n,o)}return l},encodeValue:function(e){return encodeURI(JSON.stringify(e))},decodeValue:function(e){return JSON.parse(decodeURI(e))},updateRepeaterLiveTitle:function(e,t,i){c(".zoo-repeater-live-title",t).text(e)},compare:function(e,t,i){var a=!1;switch(t){case"==":a=e==i;break;case"===":a=e===i;break;case">":a=i<e;break;case"<":a=e<i;break;case"!=":a=e!=i;break;case"!==":a=e!==i;break;case"empty":var o=_.clone(e),a=_.isObject(o)||_.isArray(o)?(_.each(o,function(e,t){_.isEmpty(e)&&delete o[t]}),!!_.isEmpty(o)):!(!_.isNull(o)&&""!=o);break;case"not_empty":o=_.clone(e);(_.isObject(o)||_.isArray(o))&&_.each(o,function(e,t){_.isEmpty(e)&&delete o[t]}),a=!_.isEmpty(o);break;default:a=_.isArray(i)?!_.isEmpty(i)&&!_.isEmpty(e)&&_.contains(i,e):e==i}return a},multiple_compare:function(e,s,l){_.isUndefined(l)&&(l=!1);var r=this,d=!1;try{var t,i,a,o,n=e[0];_.isString(n)?(d=!1,t=e[1],i=e[2],o=!1,o=_.isUndefined(e[3])?u.previewedDevice.get():e[3],_.isUndefined(s[n])||(a=s[n],l&&(a=r.decodeValue(a)),_.isObject(a)&&!_.isUndefined(a[o])&&(a=a[o]),d=r.compare(a,t,i))):_.isArray(n)&&(d=!0,_.each(e,function(e){var t=e[0],i=e[1],a=e[2],o=!1;_.isUndefined(e[3])||(o=e[3]);var n=s[t];if(_.isUndefined(n)&&(n=""),l&&_.isString(n))try{n=r.decodeValue(n)}catch(e){}o&&_.isObject(n)&&!_.isUndefined(n[o])&&(n=n[o]),r.compare(n,i,a)||(d=!1)}))}catch(e){}return d},initConditional:function(e,i){var a=this;c(".zoo-customize-control",e).each(function(){var e=c(this),t=e.attr("data-required")||!1;!_.isUndefined(t)&&t&&(t=JSON.parse(t),a.multiple_compare(t,i)?e.removeClass("zoo-hide"):e.addClass("zoo-hide"))})},addRepeaterItem:function(a,o,e,n){_.isObject(o)||(o={});var s=this,t=s.getTemplate(),i=a.fields,l=!0,r=a.title_only;!1===a.addable&&(l=!1);var d=c(t(a,"tmpl-customize-control-repeater-layout"));return e.find(".zoo-settings-fields").append(d),_.each(i,function(e,t){e.value="",e.addable=l,_.isUndefined(o[e.name])||(e.value=o[e.name]),i=c('<div class="zoo-repeater-field"></div>'),c(".zoo-repeater-item-inner",d).append(i),s.add(e,i,function(){_.isFunction(n)&&n()});var i=e.value;a.live_title_field===e.name&&("select"===e.type?i=e.choices[e.value]:!_.isUndefined(i)&&""!=i||(i=ZooCustomizeBuilderData.untitled),s.updateRepeaterLiveTitle(i,d,e))}),_.isUndefined(o._visibility)||"hidden"!==o._visibility?d.find("input.r-visible-input").prop("checked","checked"):(d.addClass("item-hidden"),d.find("input.r-visible-input").removeAttr("checked")),r&&c(".zoo-repeater-item-settings, .zoo-repeater-item-toggle",d).hide(),p.trigger("zoo/customizer/repeater/add",[d,s]),d},limitRepeaterItems:function(e,t){},initRepeater:function(t,i,a){var o=this;(t=_.defaults(t,{addable:null,title_only:null,limit:null,live_title_field:null,fields:null})).limit=parseInt(t.limit),isNaN(t.limit)&&(t.limit=0),i.find(".zoo-settings-fields").sortable({handle:".zoo-repeater-item-heading",containment:"parent",update:function(e,t){_.isFunction(a)&&a()}}),i.on("click",".zoo-repeater-reorder",function(e){e.preventDefault(),c(".zoo-repeater-items",i).toggleClass("reorder-active"),c(".zoo-repeater-add-new",i).toggleClass("disabled"),c(".zoo-repeater-items",i).hasClass("reorder-active")?c(this).html(c(this).data("done")):c(this).html(c(this).data("text"))}),i.on("click",".zoo-repeater-item .zoo-up",function(e){e.preventDefault();var t=c(this).closest(".zoo-repeater-item");0<t.index()&&(e=t.prev(),t.insertBefore(e),_.isFunction(a)&&a())}),i.on("click",".zoo-repeater-item .zoo-down",function(e){e.preventDefault();var t=c(".zoo-repeater-items .zoo-repeater-item",i).length,e=c(this).closest(".zoo-repeater-item");e.index()<t-1&&(t=e.next(),e.insertAfter(t),_.isFunction(a)&&a())}),_.isArray(t.value)&&_.each(t.value,function(e){o.addRepeaterItem(t,e,i,a)}),o.limitRepeaterItems(),i.on("change",".zoo-repeater-item .r-visible-input",function(e){e.preventDefault();e=c(this).closest(".zoo-repeater-item");c(this).is(":checked")?e.removeClass("item-hidden"):e.addClass("item-hidden")}),t.title_only||i.on("click",".zoo-repeater-item-toggle, .zoo-repeater-live-title",function(e){e.preventDefault(),c(this).closest(".zoo-repeater-item").toggleClass("zoo-open")}),i.on("click",".zoo-remove",function(e){e.preventDefault(),c(this).closest(".zoo-repeater-item").remove(),p.trigger("zoo/customizer/repeater/remove",[o]),_.isFunction(a)&&a(),o.limitRepeaterItems()});var n={};_.each(t.fields,function(e,t){n[e.name]=null,_.isUndefined(e.default)||(n[e.name]=e.default)}),i.on("click",".zoo-repeater-add-new",function(e){e.preventDefault(),c(this).hasClass("disabled")||(o.addRepeaterItem(t,n,i,a),_.isFunction(a)&&a(),o.limitRepeaterItems())})},add:function(a,o,e){var n,t,i=this,s=i.getTemplate(),l="tmpl-zoo-customize-control-"+a.type;switch(0==c("#"+l).length&&(l="tmpl-zoo-customize-control-default"),a.device_settings?(n=null,_.each(i.devices,function(e,t){var i=_.clone(a);i.original_name=a.name,_.isObject(a.value)?_.isUndefined(a.value[e])?i.value="":i.value=a.value[e]:(i.value="",0===t&&(i.value=a.value)),i.name=a.name+"-"+e,i._current_device=e;t=c(s(i,l,"field")),i=t.find(".zoo-customize-control-settings-inner").first();n||o.append(t).addClass("zoo-multiple-devices"),i.addClass("zoo-for-"+e),i.attr("data-for-device",e),n&&(i.insertAfter(n),n=i),n=i})):(a.original_name=a.name,t=s(a,l,"field"),o.html(t)),"repeater"===a.type&&(t=c(s(a,"tmpl-customize-control-repeater-inner")),o.find(".zoo-customize-control-settings-inner").replaceWith(t),i.initRepeater(a,t,e)),a.css_format&&_.isString(a.css_format)&&0<a.css_format.indexOf("value_no_unit")&&(o.find(".zoo-slider-input").addClass("no-unit"),c(".zoo-css-unit .zoo-label-active",o).hide()),a.type){case"color":case"shadow":i.initColor(o);break;case"image":case"video":case"audio":case"attchment":case"file":i.initMedia(o);break;case"slider":i.initSlider(o);break;case"css_rule":i.initCSSRuler(o,e)}},addFields:function(e,a,o,n){var s=this;_.isObject(a)||(a={}),_.each(e,function(e,t){_.isUndefined(e.class)&&(e.class="");var i=c('<div class="zoo-group-field ft--'+e.type+" "+e.class+'" data-field-name="'+e.name+'"></div>');o.append(i),e.original_name=e.name,_.isUndefined(a[e.name])?_.isUndefined(e.default)?e.value=null:e.value=e.default:e.value=a[e.name],s.add(e,i,n)})},initSlider:function(e){0<c(".zoo-input-slider",e).length&&c(".zoo-input-slider",e).each(function(){var t=c(this),e=t.parent(),i=c(".zoo-slider-input",e),a=t.data("min")||0,o=t.data("max")||300,n=t.data("step")||1;_.isNumber(a)||(a=0),_.isNumber(o)||(o=300),_.isNumber(n)||(n=1);e=i.val();t.slider({range:"min",value:e,step:n,min:a,max:o,slide:function(e,t){i.val(t.value).trigger("data-change")}}),i.on("change",function(){t.slider("value",c(this).val())});var s=t.closest(".zoo-input-slider-wrapper");s.on("click",".reset",function(e){e.preventDefault();e=t.data("default");_.isObject(e)||(e={unit:"px",value:""}),c(".zoo-slider-input",s).val(e.value),t.slider("option","value",e.value),c('.zoo-css-unit input.zoo-input[value="'+e.unit+'"]',s).trigger("click"),c(".zoo-slider-input",s).trigger("change")})})},initMedia:function(e){e.on("click",".zoo-media .zoo-add, .zoo-media .zoo-change, .zoo-media .zoo-image-preview",function(e){e.preventDefault();e=c(this).closest(".zoo-media");t.setPreview(e),t.controlMediaImage.open()}),e.on("click",".zoo-media .zoo-remove",function(e){e.preventDefault();e=c(this).closest(".zoo-media");t.remove(e)})},initCSSRuler:function(t,i){t.on("change",".zoo-label-parent",function(){var e;"radio"==c(this).attr("type")&&(e=c(this).attr("name"),c('input[name="'+e+'"]',t).parent().removeClass("zoo-label-active")),c(this).is(":checked")?c(this).parent().addClass("zoo-label-active"):c(this).parent().removeClass("zoo-label-active"),_.isFunction(i)&&i()}),t.on("change keyup",".zoo-css-ruler .zoo-input-css",function(){var e,t=c(this).closest(".zoo-css-ruler");c(".zoo-css-ruler-link input",t).is(":checked")&&(e=c(this).val(),c(".zoo-input-css",t).not(c(this)).each(function(){c(this).is(":disabled")||c(this).val(e)})),_.isFunction(i)&&i()})},initColor:function(e){c(".zoo-input-color",e).each(function(){var a=c(this),e=a.data("default")||"",o=c(".zoo-input--color",a).val();c(".zoo-color-panel",a).attr("data-alpha","true"),c(".zoo-color-panel",a).wpColorPicker({defaultColor:e,change:function(e,t){var i=t.color.toString();c(".zoo-input--color",a).val(i),t.color.toString()!==o&&(o=i,c(".zoo-input--color",a).trigger("change"))},clear:function(e,t){c(".zoo-input--color",a).val(""),c(".zoo-input--color",a).trigger("data-change")}})})}},o={devices:["desktop","mobile"],type:"zoo",settingField:null,getTemplate:_.memoize(function(){var a=this,o={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e,t,i){return _.isUndefined(t)&&(t="tmpl-zoo-customize-control-"+a.type),_.template(c("#"+t).html(),null,o)(e)}}),init:function(){var e=this;switch(_.isArray(e.params.devices)&&!_.isEmpty(e.params.devices)&&(e.devices=e.params.devices),e.settingField=e.container.find("[data-customize-setting-link]").first(),e.params.setting_type){case"group":e.initGroup();break;case"repeater":e.initRepeater();break;default:e.initField()}e.container.on("change keyup data-change","input:not(.change-by-js), select:not(.change-by-js), textarea:not(.change-by-js)",function(){e.getValue()})},addParamsURL:function(e,t){return c.isEmptyObject(t)||(e+=(0<=e.indexOf("?")?"&":"?")+c.param(t)),e},compare:s.compare,multiple_compare:s.multiple_compare,initConditional:s.initConditional,getValue:function(e){var t,i=this,a={type:i.params.setting_type,name:i.id,value:i.params.value,default:i.params.default,devices:i.params.devices};return"slider"===a.type&&(a.min=i.params.min,a.max=i.params.max,a.step=i.params.step,a.unit=i.params.unit),"css_rule"===a.type&&(a.fields_disabled=i.params.fields_disabled),"group"!==a.type&&"repeater"!==a.type||(a.fields=i.params.fields,a.live_title_field=i.params.live_title_field),"select"!==i.params.setting_type&&"radio"!==i.params.setting_type||(a.choices=i.params.choices),"checkbox"===i.params.setting_type&&(a.checkbox_label=i.params.checkbox_label),a.device_settings=i.params.device_settings,t=s.getValue(a,c(".zoo-settings-fields",i.container)),(_.isUndefined(e)||e)&&(i.setting.set(i.encodeValue(t)),_.isArray(i.params.reset_controls)&&_.each(i.params.reset_controls,function(e){try{var t=u.control(e);t.setting.set(i.encodeValue(t.params.default))}catch(e){}}),p.trigger("zoo/customizer/value_changed",[i,t])),t},encodeValue:function(e){return encodeURI(JSON.stringify(e))},decodeValue:function(e){var t=!1;try{t=JSON.parse(decodeURI(e))}catch(e){}return t||e},updateRepeaterLiveTitle:function(e,t,i){c(".zoo-repeater-live-title",t).text(e)},initGroup:function(){var o=this;o.params.device_settings?(o.container.find(".zoo-settings-fields").addClass("zoo-multiple-devices"),_.isObject(o.params.value)||(o.params.value={}),_.each(o.devices,function(e,t){var i=c('<div class="zoo-group-device-fields zoo-customize-control-settings-inner zoo-for-'+e+'"></div>');o.container.find(".zoo-settings-fields").append(i);var a={};_.isUndefined(o.params.value[e])||(a=o.params.value[e]),_.isObject(a)||(a={}),s.addFields(o.params.fields,a,i,function(){o.getValue()})})):s.addFields(o.params.fields,o.params.value,o.container.find(".zoo-settings-fields"),function(){o.getValue()}),o.getValue(!1)},addField:function(e,t,i){s.devices=_.clone(this.devices),s.add(e,t,i)},initField:function(){var e=this,t=_.clone(e.params);"slider"==(t=_.extend(t,{type:e.params.setting_type,name:e.id,value:e.params.value,default:e.params.default,devices:e.params.devices,unit:e.params.unit,title:null,label:null,description:null})).type&&(t.min=e.params.min,t.max=e.params.max,t.step=e.params.step),"css_rule"==t.type&&(t.fields_disabled=e.params.fields_disabled),"select"!=e.params.setting_type&&"radio"!=e.params.setting_type||(t.choices=e.params.choices),"checkbox"==e.params.setting_type&&(t.checkbox_label=e.params.checkbox_label),t.device_settings=e.params.device_settings;var i=e.container.find(".zoo-settings-fields");e.addField(t,i,function(){e.getValue()})},addRepeaterItem:function(a){_.isObject(a)||(a={});var o=this,e=o.getTemplate(),t=o.params.fields,n=!0,i=o.params.title_only;!1===o.params.addable&&(n=!1);var s=c(e(o.params,"tmpl-customize-control-repeater-item"));return o.container.find(".zoo-settings-fields").append(s),_.each(t,function(e,t){var i;e.value="",e.addable=n,_.isUndefined(a[e.name])||(e.value=a[e.name]),i=c('<div class="zoo-repeater-field"></div>'),c(".zoo-repeater-item-inner",s).append(i),o.addField(e,i,function(){o.getValue()})}),_.isUndefined(a._visibility)||"hidden"!==a._visibility?s.find("input.r-visible-input").prop("checked","checked"):(s.addClass("item-hidden"),s.find("input.r-visible-input").removeAttr("checked")),i&&c(".zoo-repeater-item-settings, .zoo-repeater-item-toggle",s).hide(),p.trigger("zoo/customizer/repeater/add",[s,o]),s},limitRepeaterItems:function(){var e=this,t=c(".zoo-repeater-add-new",e.container),i=c(".zoo-settings-fields .zoo-repeater-item",e.container).length;0<e.params.limit&&(i>=e.params.limit?(t.addClass("zoo-hide"),e.params.limit_msg&&(0===c(".zoo-limit-item-msg",e.container).length?c('<p class="zoo-limit-item-msg">'+e.params.limit_msg+"</p>").insertBefore(t):c(".zoo-limit-item-msg",e.container).removeClass("zoo-hide"))):(c(".zoo-limit-item-msg",e.container).addClass("zoo-hide"),t.removeClass("zoo-hide"))),0<i?c(".zoo-repeater-reorder",e.container).removeClass("zoo-hide"):c(".zoo-repeater-reorder",e.container).addClass("zoo-hide")},initRepeater:function(){var i=this;i.params.limit=parseInt(i.params.limit),isNaN(i.params.limit)&&(i.params.limit=0),i.container.find(".zoo-settings-fields").sortable({handle:".zoo-repeater-item-heading",containment:"parent",update:function(e,t){i.getValue()}}),i.container.on("click",".zoo-repeater-reorder",function(e){e.preventDefault(),c(".zoo-repeater-items",i.container).toggleClass("reorder-active"),c(".zoo-repeater-add-new",i.container).toggleClass("disabled"),c(".zoo-repeater-items",i.container).hasClass("reorder-active")?c(this).html(c(this).data("done")):c(this).html(c(this).data("text"))}),i.container.on("click",".zoo-repeater-item .zoo-up",function(e){e.preventDefault();var t=c(this).closest(".zoo-repeater-item");0<t.index()&&(e=t.prev(),t.insertBefore(e),i.getValue())}),i.container.on("click",".zoo-repeater-item .zoo-down",function(e){e.preventDefault();var t=c(".zoo-repeater-items .zoo-repeater-item",i.container).length,e=c(this).closest(".zoo-repeater-item");e.index()<t-1&&(t=e.next(),e.insertAfter(t),i.getValue())}),_.isArray(i.params.value)&&(_.each(i.params.value,function(e){i.addRepeaterItem(e)}),i.getValue(!1)),i.limitRepeaterItems(),i.container.on("change",".zoo-repeater-item .r-visible-input",function(e){e.preventDefault();e=c(this).closest(".zoo-repeater-item");c(this).is(":checked")?e.removeClass("item-hidden"):e.addClass("item-hidden")}),i.params.title_only||i.container.on("click",".zoo-repeater-item-toggle, .zoo-repeater-live-title",function(e){e.preventDefault(),c(this).closest(".zoo-repeater-item").toggleClass("zoo-open")}),i.container.on("click",".zoo-remove",function(e){e.preventDefault(),c(this).closest(".zoo-repeater-item").remove(),p.trigger("zoo/customizer/repeater/remove",[i]),i.getValue(),i.limitRepeaterItems()});var a={};_.each(i.params.fields,function(e,t){a[e.name]=null,_.isUndefined(e.default)||(a[e.name]=e.default)}),i.container.on("click",".zoo-repeater-add-new",function(e){e.preventDefault(),c(this).hasClass("disabled")||(i.addRepeaterItem(a),i.getValue(),i.limitRepeaterItems())})}};u.controlConstructor.zoo=u.Control.extend({ready:function(){a[this.id]=this}});var n={pickingEl:null,listIcons:null,render:function(e){var i=this;_.isUndefined(e)||_.isEmpty(e)||_.each(e,function(e,t){c("#zoo-sidebar-icon-type").append(' <option value="'+t+'">'+e.name+"</option>"),i.addCSS(e,t),i.addIcons(e,t)})},addCSS:function(e,t){c("head").append("<link rel='stylesheet' id='font-icon-"+t+"'  href='"+e.url+"' type='text/css' media='all' />")},addIcons:function(a,o){var n='<ul class="zoo-list-icons icon-'+o+'" data-type="'+o+'">';_.each(a.icons,function(e,t){var i="",i=a.class_config?a.class_config.replace(/__icon_name__/g,e):e;n+='<li title="'+e+'" data-type="'+o+'" data-icon="'+i+'"><span class="icon-wrapper"><i class="'+i+'"></i></span></li>'}),n+="</ul>",c("#zoo-icon-browser").append(n)},changeType:function(){p.on("change","#zoo-sidebar-icon-type",function(){var e=c(this).val();e&&"all"!=e?(c("#zoo-icon-browser .zoo-list-icons").hide(),c("#zoo-icon-browser .zoo-list-icons.icon-"+e).show()):c("#zoo-icon-browser .zoo-list-icons").show()})},show:function(){var e=c("#customize-controls").width();(ZooCustomizeBuilderData.isRtl?c("#zoo-sidebar-icons").css("right",e):c("#zoo-sidebar-icons").css("left",e)).addClass("zoo-active")},close:function(){(ZooCustomizeBuilderData.isRtl?c("#zoo-sidebar-icons").css("right",-300):c("#zoo-sidebar-icons").css("left",-300)).removeClass("zoo-active"),c(".zoo-icon-picker").removeClass("zoo-icon-picking"),this.pickingEl=null},autoClose:function(){var t=this;p.on("click",function(e){c(e.target).closest(".zoo-icon-picker").length||c(e.target).closest("#zoo-sidebar-icons").length||t.close()}),c("#zoo-sidebar-icons .customize-controls-icon-close").on("click",function(){t.close()}),p.on("keyup",function(e){27===e.keyCode&&t.close()})},picker:function(){function i(e){a.pickingEl&&a.pickingEl.removeClass("zoo-icon-picking"),a.pickingEl=e.closest(".zoo-icon-picker"),a.pickingEl.addClass("zoo-picking-icon"),a.show()}var a=this;p.on("click",".zoo-icon-picker .zoo-pick-icon",function(e){e.preventDefault();var t=c(this);_.isNull(a.listIcons)?a.ajaxLoad(function(){i(t)}):i(t)}),p.on("click","#zoo-icon-browser li",function(e){e.preventDefault();var t=c(this),i=t.find("i").clone(),e=t.attr("data-icon")||"",t=t.attr("data-type")||"";c(".zoo-input-icon-type",a.pickingEl).val(t),c(".zoo-input-icon-name",a.pickingEl).val(e).trigger("change"),c(".zoo-icon-preview-icon",a.pickingEl).html(i),a.close()}),p.on("click",".zoo-icon-picker .zoo-icon-remove",function(e){e.preventDefault(),a.pickingEl&&a.pickingEl.removeClass("zoo-icon-picking"),a.pickingEl=c(this).closest(".zoo-icon-picker"),a.pickingEl.addClass("zoo-picking-icon"),c(".zoo-input-icon-type",a.pickingEl).val(""),c(".zoo-input-icon-name",a.pickingEl).val("").trigger("change"),c(".zoo-icon-preview-icon",a.pickingEl).html("")})},ajaxLoad:function(t){var i=this;c.get(ZooCustomizeBuilderData.ajax,{action:"zoo_customize__load_font_icons"},function(e){e.success&&(i.listIcons=e.data,i.render(e.data),i.changeType(),i.autoClose(),_.isFunction(t)&&t())})},init:function(){this.ajaxLoad(),this.picker(),p.on("keyup","#zoo-icon-search",function(e){var t=c(this).val();(t=t.trim())?(c("#zoo-icon-browser li").hide(),c("#zoo-icon-browser li[data-icon*='"+t+"']").show()):c("#zoo-icon-browser li").show()})}},r={fonts:null,optionHtml:"",$el:null,values:{},config:{},container:null,fields:{},load:function(){r.fonts||c.get(ZooCustomizeBuilderData.ajax,{action:"zoo_customize_load_fonts"}).done(function(e){e.success&&(r.fonts=e.data,p.trigger("typoFontsLoaded",[r.fonts]))})},toSelectOptions:function(e,i,t){var a,o,n,s="";if(_.isUndefined(i)&&(i=""),"google"===t)_.each(e,function(e){s+="<option"+(e===i?' selected="selected" ':"")+' value="'+e+'">'+e+"</option>"});else for(_.each(ZooCustomizeBuilderData.list_font_weight,function(e,t){s+="<option"+(e===i?' selected="selected" ':"")+' value="'+t+'">'+e+"</option>"}),n=1;n<=9;n++)o="",(a=100*n)===i&&(o=' selected="selected" '),s+="<option"+o+' value="'+a+'">'+a+"</option>";return s},toCheckboxes:function(e,i){var a='<div class="list-subsets">';return _.isObject(i)||(i={}),_.each(e,function(e){var t="";_.isUndefined(i[e])||(t=' checked="checked" '),a+="<p><label><input "+t+'type="checkbox" class="zoo-typo-input change-by-js" data-name="languages" name="_n-'+(new Date).getTime()+'" value="'+e+'"> '+e+"</label></p>"}),a+="</div>"},ready:function(){var a=this;s.devices=_.clone(s.allDevices),_.isObject(a.values)||(a.values={}),a.fields={},_.isEmpty(a.config)?a.fields=ZooCustomizeBuilderData.typo_fields:_.each(ZooCustomizeBuilderData.typo_fields,function(e,t){var i=!0;_.isUndefined(a.config[e.name])||!1===a.config[e.name]&&(i=!1),i&&(a.fields[e.name]=e)}),c(".zoo-modal-settings--fields",a.container).append('<input type="hidden" class="zoo-font-type">'),s.addFields(a.fields,a.values,c(".zoo-modal-settings--fields",a.container),function(){a.get()}),c("input, select, textarea",c(".zoo-modal-settings--fields")).removeClass("zoo-input").addClass("zoo-typo-input change-by-js"),a.optionHtml+='<option value="">'+ZooCustomizeBuilderData.theme_default+"</option>",_.each(a.fonts,function(e,t){a.optionHtml+='<optgroup label="'+e.title+'">',_.each(e.fonts,function(e,t){a.optionHtml+='<option value="'+t+'">'+t+"</option>"}),a.optionHtml+="</optgroup>"}),c('.zoo-typo-input[data-name="font"]',a.container).html(a.optionHtml),!_.isUndefined(a.values.font)&&_.isString(a.values.font)&&c('.zoo-typo-input[data-name="font"] option[value="'+a.values.font+'"]',a.container).attr("selected","selected"),a.container.on("change init-change",'.zoo-typo-input[data-name="font"]',function(){var e=c(this).val();a.setUpFont(e)}),c('.zoo-typo-input[data-name="font"]',a.container).trigger("init-change"),a.container.on("change data-change","input, select",function(){a.get()})},setUpFont:function(e){var t,i,a,o=this;_.isEmpty(e)&&(a="normal"),e=_.isString(e)?(a=_.isUndefined(o.fonts.google.fonts[e])?"normal":"google",o.fonts.google.fonts[e]):o.fonts.google.fonts[e.font],_.isUndefined(e)||_.isEmpty(e)||(t=e.variants,i=e.subsets),c('.zoo-typo-input[data-name="font_weight"]',o.container).html(o.toSelectOptions(t,_.isObject(o.values)?o.values.font_weight:"",a)),c(".zoo-font-type",o.container).val(a),"normal"==a?c('.zoo-group-field[data-field-name="languages"]',o.container).addClass("zoo-hide").find(".zoo-customize-control-settings-inner").html(""):(c('.zoo-group-field[data-field-name="languages"]',o.container).removeClass("zoo-hide"),c('.zoo-group-field[data-field-name="languages"]',o.container).removeClass("zoo-hide").find(".zoo-customize-control-settings-inner").html(o.toCheckboxes(i,_.isObject(o.values)?o.values.languages:"")))},open:function(){var e,t=this,i=t.$el;"opening"!==(i.attr("data-opening")||!1)?(i.attr("data-opening","opening"),t.values=c(".zoo-typography-input",t.$el).val(),t.values=JSON.parse(t.values),i.addClass("zoo-modal--inside"),c(".zoo-modal-settings",i).length?(t.container=c(".zoo-modal-settings",i),t.container.hide()):(e=c(c("#tmpl-zoo-modal-settings").html()),t.container=e,t.container.hide(),this.$el.append(e),t.ready()),t.container.slideDown(300,function(){t.$el.addClass("modal--opening"),c(".action--reset",t.$el).show()})):c(".zoo-modal-settings",i).slideUp(300,function(){i.attr("data-opening",""),i.removeClass("modal--opening"),c(".action--reset",i).hide()})},reset:function(){var e=this,t=e.$el;c(".zoo-modal-settings",t).remove(),e.values=c(".zoo-typography-input",e.$el).attr("data-default")||"{}";try{e.values=JSON.parse(e.values)}catch(e){}t.addClass("zoo-modal--inside"),c(".zoo-modal-settings",t).length?e.container=c(".zoo-modal-settings",t):(t=c(c("#tmpl-zoo-modal-settings").html()),e.container=t,this.$el.append(t),e.ready()),e.get()},get:function(){var t={},i=this;return _.each(this.fields,function(e){"languages"===e.name&&(e.type="checkboxes"),t[e.name]=s.getValue(e,c('.zoo-group-field[data-field-name="'+e.name+'"]',i.container))}),t.variant={},_.isUndefined(i.fonts.google.fonts[t.font])||(t.variant=i.fonts.google.fonts[t.font].variants),t.font_type=c(".zoo-font-type",i.container).val(),c(".zoo-typography-input",this.$el).val(JSON.stringify(t)).trigger("change"),t},init:function(){this.load()}};r.load();var d={},l={tabs:{normal:"Normal",hover:"Hover"},config:{},$el:null,container:null,controlID:"",addFields:function(e){var o=this;_.isObject(o.values)||(o.values={}),o.values=_.defaults(o.values,{});var n=c(".zoo-modal-settings--fields",o.container);n.html(""),o.config=_.defaults(o.config,{tabs:{}});var i=c('<div class="modal--tabs"></div>'),a=0;_.each(o.config.tabs,function(e,t){e&&_.isObject(o.config[t+"_fields"])&&(a++,i.append('<div><span data-tab="'+t+'" class="modal--tab modal-tab--'+t+'">'+e+"</span></div>"))}),n.append(i),a<=1&&i.addClass("zoo-hide"),s.devices=ZooCustomizeBuilderData.devices,_.each(o.config.tabs,function(e,t){var i,a;_.isObject(o.config[t+"_fields"])&&!_.isEmpty(t+"_fields")&&(i=c('<div class="modal-tab-content modal-tab--'+t+'"></div>'),n.append(i),s.addFields(o.config[t+"_fields"],o.values[t],i,function(){o.get(_.clone(o.config))}),_.isUndefined(o.values[t])||_.isEmpty(o.values[t])?(a={},_.each(o.config[t+"_fields"],function(e){a[e.name]=_.isUndefined(e.default)?null:e.default})):a=o.values[t],s.initConditional(i,a))}),c("input, select, textarea",o.container).removeClass("zoo-input").addClass("zoo-modal-input change-by-js"),n.on("change data-change","input, select, textarea",function(){o.get(_.clone(o.config))}),o.container.on("click",".modal--tab",function(){var e=c(this).attr("data-tab")||"";c(".modal--tabs .modal--tab",o.container).removeClass("tab--active"),c(this).addClass("tab--active"),c(".modal-tab-content",o.container).removeClass("tab--active"),c(".modal-tab-content.modal-tab--"+e,o.container).addClass("tab--active")}),c(".modal--tabs .modal--tab",o.container).eq(0).trigger("click"),this.container.slideUp(0)},close:function(){var e=this;e.container.slideUp(300,function(){e.$el.removeClass("modal--opening"),e.$el.attr("data-opening",""),c(".action--reset",e.$el).hide()})},reset:function(){var e,t=this;c(".zoo-modal-settings",t.$el).remove();try{var i=u.control(t.controlID).params.default;t.values=i}catch(e){t.values={}}c(".zoo-modal-settings",t.$el).length?t.container=c(".zoo-modal-settings",t.$el):(e=c(c("#tmpl-zoo-modal-settings").html()),t.container=e,this.$el.append(e),t.addFields()),t.$el.addClass("zoo-modal--inside"),t.$el.addClass("modal--opening"),t.container.show(0),c(".zoo-hidden-modal-input",t.$el).val(JSON.stringify(t.values)).trigger("change")},get:function(e){var o={},n=this;return n.config=e,_.each(n.config.tabs,function(e,t){var i={},a=c(".modal-tab-content.modal-tab--"+t,n.container);_.isObject(n.config[t+"_fields"])&&_.each(n.config[t+"_fields"],function(e){i[e.name]=s.getValue(e,c('.zoo-group-field[data-field-name="'+e.name+'"]',a))}),o[t]=i,s.initConditional(a,i)}),c(".zoo-hidden-modal-input",this.$el).val(JSON.stringify(o)).trigger("change"),o},open:function(){var e,t=this;if("opening"!==(t.$el.attr("data-opening")||!1)){t.$el.attr("data-opening","opening"),t.values=c(".zoo-hidden-modal-input",t.$el).val();try{t.values=JSON.parse(t.values)}catch(e){}t.$el.addClass("zoo-modal--inside"),c(".zoo-modal-settings",t.$el).length?t.container=c(".zoo-modal-settings",t.$el):((e=c(c("#tmpl-zoo-modal-settings").html())).hide(),t.container=e,t.$el.append(e),t.addFields()),this.container.slideDown(300),this.$el.addClass("modal--opening"),c(".action--reset",this.$el).show()}else this.container.slideUp(300,function(){t.$el.attr("data-opening",""),c(".zoo-modal-settings",t.$el).hide(),t.$el.removeClass("modal--opening"),c(".action--reset",t.$el).hide()})}},m={},f={tabs:{normal:"Normal",hover:"Hover"},fields:{},normal_fields:{},hover_fields:{},controlID:"",$el:"",contailner:"",setupFields:function(t,e){var i,a,o=[];return-1===t?o=e:!1===t?o=null:_.isObject(t)&&(i={},a=0,_.each(e,function(e){(_.isUndefined(t[e.name])||t[e.name])&&(i[a]=e,a++)}),o=i),o},setupConfig:function(e,t,i){var a=this;a.tabs={},a.normal_fields={},a.hover_fields={},a.tabs=_.clone(ZooCustomizeBuilderData.styling_config.tabs),!1===e?a.tabs.hover=!1:_.isObject(e)&&(a.tabs=e),a.normal_fields=a.setupFields(t,ZooCustomizeBuilderData.styling_config.normal_fields),a.hover_fields=a.setupFields(i,ZooCustomizeBuilderData.styling_config.hover_fields)},addFields:function(e){var a=this;_.isObject(a.values)||(a.values={}),a.values=_.defaults(a.values,{hover:{},normal:{}});var o=c(".zoo-modal-settings--fields",a.container);o.html("");var i=c('<div class="modal--tabs"></div>'),n=0;_.each(a.tabs,function(e,t){e&&!_.isEmpty(a[t+"_fields"])&&(n++,i.append('<div><span data-tab="'+t+'" class="modal--tab modal-tab--'+t+'">'+e+"</span></div>"))}),o.append(i),n<=1&&i.addClass("zoo-hide"),s.devices=ZooCustomizeBuilderData.devices,_.each(a.tabs,function(e,t){var i;_.isObject(a[t+"_fields"])&&!_.isEmpty(t+"_fields")&&(i=c('<div class="modal-tab-content modal-tab--'+t+'"></div>'),o.append(i),s.addFields(a[t+"_fields"],a.values[t],i,function(){a.get()}),s.initConditional(i,a.values[t]))}),c("input, select, textarea",a.container).removeClass("zoo-input").addClass("zoo-modal-input change-by-js"),o.on("change data-change","input, select, textarea",function(){a.get()}),a.container.on("click",".modal--tab",function(){var e=c(this).attr("data-tab")||"";c(".modal--tabs .modal--tab",a.container).removeClass("tab--active"),c(this).addClass("tab--active"),c(".modal-tab-content",a.container).removeClass("tab--active"),c(".modal-tab-content.modal-tab--"+e,a.container).addClass("tab--active")}),c(".modal--tabs .modal--tab",a.container).eq(0).trigger("click"),this.container.slideUp(0)},close:function(){var e=this;e.container.slideUp(300,function(){e.$el.removeClass("modal--opening"),e.$el.attr("data-opening",""),c(".action--reset",e.$el).hide()})},reset:function(){var e,t=this;c(".zoo-modal-settings",t.$el).remove();try{var i=u.control(t.controlID).params.default;t.values=i}catch(e){t.values={}}c(".zoo-modal-settings",t.$el).length?t.container=c(".zoo-modal-settings",t.$el):(e=c(c("#tmpl-zoo-modal-settings").html()),t.container=e,t.$el.append(e),t.addFields()),t.$el.addClass("zoo-modal--inside"),t.$el.addClass("modal--opening"),t.container.show(0),c(".zoo-hidden-modal-input",t.$el).val(JSON.stringify(t.values)).trigger("change")},get:function(){var o={},n=this;return _.each(n.tabs,function(e,t){var i={},a=c(".modal-tab-content.modal-tab--"+t,n.container);_.isObject(n[t+"_fields"])&&_.each(n[t+"_fields"],function(e){i[e.name]=s.getValue(e,c('.zoo-group-field[data-field-name="'+e.name+'"]',a))}),o[t]=i,s.initConditional(a,i)}),c(".zoo-hidden-modal-input",this.$el).val(JSON.stringify(o)).trigger("change"),o},open:function(){var e,t=this;if("opening"!==(t.$el.attr("data-opening")||!1)){t.$el.attr("data-opening","opening"),t.values=c(".zoo-hidden-modal-input",t.$el).val();try{t.values=JSON.parse(t.values)}catch(e){}t.$el.addClass("zoo-modal--inside"),c(".zoo-modal-settings",t.$el).length?t.container=c(".zoo-modal-settings",t.$el):((e=c(c("#tmpl-zoo-modal-settings").html())).hide(),t.container=e,t.$el.append(e),t.addFields()),this.container.slideDown(300),t.$el.addClass("modal--opening"),c(".action--reset",t.$el).show()}else t.container.slideUp(300,function(){t.$el.attr("data-opening",""),c(".zoo-modal-settings",t.$el).hide(),t.$el.removeClass("modal--opening"),c(".action--reset",t.$el).hide()})}},v={};function i(n,s){var e={id:s,controlId:"",cols:12,cellHeight:45,items:[],container:null,ready:!1,devices:{desktop:"Desktop",mobile:"Mobile/Tablet"},activePanel:"desktop",panels:{},activeRow:"main",draggingItem:null,getTemplate:_.memoize(function(){var a=this,o={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e,t,i){return _.isUndefined(t)&&(t="tmpl-customize-control-"+a.type),!_.isUndefined(i)&&_.isString(i)?o.variable=i:o.variable="data",_.template(c("#"+t).html(),null,o)(e)}}),drag_drop:function(){var n=this;c(".zoo-device-panel",n.container).each(function(){var i=c(this),a=i.data("device"),o=[];n.panels[a]={},c(".zoo-customize-builder-items",i).each(function(e){var t=c(this).attr("data-id")||"",t=t?"_sid_"+a+"-"+t:"_sid_"+a+e;c(this).attr("id",t),o[e]="#"+t}),c(".grid-stack, .zoo-customize-builder-sidebar-items",i).each(function(){var e=c(this).attr("data-id")||"";n.panels[a][e]=c(this),c(this).droppable({out:function(e,t){},over:function(e,t){},drop:function(e,t){var i=c(this);n.gridster(i,t,e),n.save()}})}),c(".zoo-available-items .grid-stack-item",i).draggable({revert:"invalid",connectToSortable:!1,start:function(e,t){c("body").addClass("builder-item-moving"),c(".zoo-customize-builder-items",i).css("z-index",""),t.helper.parent().css("z-index",9999)},stop:function(e,t){c("body").removeClass("builder-item-moving"),c(".zoo-customize-builder-items",i).css("z-index",""),t.helper.parent().css("z-index","")}}),c(".zoo-available-items .grid-stack-item",i).resizable({handles:"w, e",stop:function(e,t){n.setGridWidth(t.element.parent(),t),n.save()}})})},sortGrid:function(e){c(".grid-stack-item",e).each(function(){var e,t=c(this),i=t.attr("data-gs-x")||0,i=parseInt(i),a=t.next();0<a.length&&(e=a.attr("data-gs-x")||0,(e=parseInt(e))<i&&t.insertAfter(a))})},getX:function(e){e=e.attr("data-gs-x")||0;return parseInt(e)},getW:function(e,t){return _.isUndefined(t)&&(t=!1),e=t?e.attr("data-df-width")||1:e.attr("data-gs-width")||1,parseInt(e)},gridGetItemInfo:function(e,t,i){for(var a=this.getX(e),o=this.getW(e),n=0,s=0,l=!1,r=a-1;0<=r&&!l;)0===t[r]?n++:l=!0,r--;for(l=!1,r=a+o;r<this.cols&&!l;)0===t[r]?s++:l=!0,r++;return{flag:t,x:a,w:o,item:e,before:n,after:s,id:e.attr("data-id")||"",wrapper:i}},updateItemsPositions:function(e){for(var t=this.cols,i=0;i<=t;i++)"object"!=typeof e[i]&&"function"!=typeof e[i]||e[i].attr("data-gs-x",i)},gridster:function(e,t,i){"_sid_desktop-sidebar"!=e.attr("id")&&"_sid_mobile-sidebar"!=e.attr("id")||(this.cols=64);function p(e){for(var t=e.x,i=e.w,a=e.el,o=t;o<t+i;o++)C[o]=o===t?a:1}function s(e){for(var t=e.x,i=e.w,a=(e.el,t);a<t+i;a++)C[a]=0}function m(e,t){for(var i=0,a=e;a<x;a++)if(0===C[a])i++;else if(t)return i;return i}function f(e,t){var i=0;void 0===t&&(t=!1);for(var a=e;0<=a;a--)if(0===C[a])i++;else if(t)return i;return i}function v(e){return 0===C[e]}function h(e,t){for(var i=e;i<e+t;){if(0!==C[i])return;i++}return 1}function g(e){if(e<0)return{x:-1,w:1};var t,i,a,o=-1;if(C[e]<=1)for(t=e,a=!1;0<=t&&!a;)1!==C[t]&&0!==C[t]&&(o=t,a=!0),t--;else o=e;for(t=o+1,i=o;1===C[t];)i++,t++;return{x:o,w:i+1-o}}function z(e){var t,i,a,o=-1;if(C[e]<x)for(t=e,a=!1;t<x&&!a;)1!==C[t]&&0!==C[t]&&(o=t,a=!0),t++;else o=e;for(t=o+1,i=o;1===C[t];)i++,t++;return{x:o,w:i+1-o}}function b(e,t){var i=C.slice(),a=f(e);if(0===a)return t;for(var o=g(e),n=0<=o.x?o.x+o.w-1:e,s=t,s=a<t?a:t,l=0,r=0,d=n;r<=s&&0<=d;)0===C[d]&&(r++,l=d),d--;for(var c=[],u=0,d=l;d<=n;d++)(C[d]=0)!==i[d]&&(c[u]=i[d],u++);for(u=0,d=l;d<=n;d++)void 0!==c[u]?C[d]=c[u]:C[d]=0,u++;return t-s}function w(e,t){var i=C.slice(),a=m(e);if(0===a)return t;for(var o=g(e),n=0<=o.x?o.x:e,s=t,s=t<=a?t:a,l=e,r=0,d=n;r<s&&d<x;)0===C[d]&&(r++,l=d),d++;for(var c=[],u=0,d=n;d<=l;d++)(C[d]=0)!==i[d]&&(c[u]=i[d],u++);for(u=c.length-1,d=l;n<=d;d--)void 0!==c[u]?C[d]=c[u]:C[d]=0,u--;return t-s}function y(){k.updateItemsPositions(C)}function l(e,t){var i,a,o,d=e.x,n=e.w,s=function(){for(var e=0,t=0;t<x;t++)0===C[t]&&e++;return e}();if(s<=0)return!1;if(_.isUndefined(t)&&(t=!1),!t){if(v(d)){if(h(d,o=n))return p(e),e.el.attr("data-gs-x",d),e.el.attr("data-gs-width",o),!0;for((i=n<=(a=m(d,!0))+(l=f(d-1,!0))&&n-a<=l?d-(n-a):d-l)<0&&(i=0);1<=o;){if(h(i,o))return e.x=i,e.w=o,p(e),e.el.attr("data-gs-x",i),e.el.attr("data-gs-width",o),!0;o--}}if(1===C[d]){var l=g(d);if(0<=l.x&&d>l.x+Math.floor(l.w/2)&&d>l.x&&(i=l.x+l.w,n<=(a=m(i,!0))))return p({el:e.el,x:i,w:n}),e.el.attr("data-gs-x",i),e.el.attr("data-gs-width",n),!0}}!function(e,t){var i,a,o,n=0,s=!1;if(v(t)){if(i=g(t),a=z(t),-1<i.x){if((n=m(i.x))>=e.w)if(h(t,e.w))d=t,s=!0;else if(e.ox>t)for(o=i.x+i.w,r=(r=f(o))<=e.w?e.w-r:e.w,w(o+1,r),n=m(o),s=!1;o>i.x+i.w&&!s;)h(o,e.w)&&(d=o,s=!0),o--;if(!s&&e.ox<t){o=i.x+i.w-1,(r=f(i.x))>e.w&&(r=e.w),r-=2,b(i.x,r),o-=n=m(o),a=z(t);var l=i.x+i.w;for(-1<a.x&&(l=a.x);o<l&&!s;)h(o,e.w)&&(d=o,s=!0),o++}s||(d=i.x+i.w,e.w=n,e.x=d)}else if(-1<a.x){a=z(t);var r=(n=m(t,!1))>=e.w?e.w:n;for(w(t,r),o=a.x;0<=o&&!s;)h(o,e.w)&&(d=o,e.x=d,s=!0),o--;s||(d=t,e.w=n,e.x=d)}}else if(i=g(t),e.ox<i.x)if(b(t,e.w),v(t))d=t;else{for(;!v(t)&&t<=k.cols-1;)t++;d=t}else if(w(t,e.w),v(t))d=t;else{for(;!v(t)&&0<=t;)t--;d=t}d>k.cols&&(d=k.cols-1),e.x=d}(e,_.clone(d));var r,c=!1,u=0;for(d+n>k.cols-1&&(u=f(d,!0)),y(),u=0;1<=n;){if(n<=s){if(h(d,n))return e.w=n,p(e),e.el.attr("data-gs-x",d),e.el.attr("data-gs-width",n),!0;for(u=f(d,!(c=!1)),r=d-u;r<x&&!c;){if(h(r,n))return e.w=n,p({el:e.el,x:r,w:n}),e.el.attr("data-gs-x",r),e.el.attr("data-gs-width",n),c=!0;r++}}n--}for(n=e.w,c=!1;1<=n;){for(r=0;r<x&&!c;){if(h(r,n))return p({el:e.el,x:r,w:n}),e.el.attr("data-gs-x",r),e.el.attr("data-gs-width",n),c=!0;r++}n--}return!1}var C=[],k=this,x=this.cols,a=(C=(k=this).getFlag(e)).slice(),o=e.offset();k.draggingItem=t.draggable;var n,r=e.width(),d=r/k.cols,c=0,u=t.offset,D=k.getW(t.draggable,!1),U=k.getW(t.draggable,!0),I=t.draggable.width(),$=k.getX(t.draggable);ZooCustomizeBuilderData.isRtl&&s({el:t.draggable,x:$,w:U});var F,O=0,S=0,R=!1;if(t.draggable.parent().is(e)?(n=!0,U=D):(n=!1,U<D&&(U=D)),ZooCustomizeBuilderData.isRtl?(O=Math.round((o.left+r+10-i.clientX)/d),(S=Math.round((o.left+r-(u.left+I+10))/d))<0&&(S=0)):(O=Math.round((i.clientX-o.left)/d),(S=Math.round((u.left-o.left-10)/d))<0&&(S=0)),O>k.cols&&(O=k.cols),F=c=S,ZooCustomizeBuilderData.isRtl)if(v(F))c=S,R=!0;else for(;F<k.cols&&!R;)v(F)?R=!0:F++;else if(v(c))c=S,R=!0;else{for(;c<=O&&!R;)v(c)?R=!0:c++;O<c&&(c=O)}if(R||(c=n?S:O),c<0&&(c=0),c+U>=k.cols){for(R=!0,F=c;F+U>k.cols&&R;)v(F)?F--:(F++,R=!1);c=F}R=void 0;D={el:t.draggable,x:c,w:U,ox:$,ow:D};D.x<=0&&(D.x=0);(n?(D.x=parseInt(t.draggable.attr("data-gs-x")||0),D.w=parseInt(t.draggable.attr("data-gs-width")||1),function(e,t){e.x;var i=e.w;s(e);var a=g(t),o=0;if(-1<a.x&&(o=a.x+a.w),h(t,i))return p({el:e.el,x:t,w:i});if(0<o&&h(o,i)&&o<=t){a=z(t);if(-1<a.x&&e.w+t>=a.x)for(var n=_.clone(t);o<n;){if(h(n,i))return p({el:e.el,x:n,w:i});n--}if(t+i>k.cols){a=k.cols-i;if(h(a,i))return p({el:e.el,x:a,w:i})}return p({el:e.el,x:o,w:i})}e.x=t,l(e,!0)}(D,c),!0):l(D))?(t.draggable.removeClass("item-from-list"),e.append(t.draggable),t.draggable.removeAttr("style"),k.draggingItem=null):(t.draggable.removeAttr("style"),C=a),y(),k.updateAllGrids()},updateAllGrids:function(){var i=this;_.each(i.panels[i.activePanel],function(e,t){i.updateGridFlag(e)})},setGridWidth:function(e,t){var i,a,o,n,s=this,l=t.element,r=e.width(),d=t.size.width,c=t.originalSize.width,u=Math.ceil(r/s.cols)-1,p=ZooCustomizeBuilderData.isRtl?(i=t.originalPosition.left>t.position.left,c!==d):(i=t.originalPosition.left>t.position.left,t.originalPosition.left<t.position.left),m=t.originalElement.attr("data-gs-width")||1,r=t.originalElement.attr("data-gs-x")||0,m=parseInt(m),r=parseInt(r),c=s.getFlag(e),c=s.gridGetItemInfo(t.originalElement,c,e);if(i)return ZooCustomizeBuilderData.isRtl?(o=Math.floor((t.position.left-1)/u),(a=(o=s.cols-o)-r-m)>c.after&&(a=c.after),v=m+a,l.attr("data-gs-x",r).removeAttr("style")):((a=r-(o=Math.floor((t.position.left-1)/u)))>c.before&&(a=c.before),o=r-a,v=m+a,l.attr("data-gs-x",o).removeAttr("style")),l.attr("data-gs-width",v).removeAttr("style"),void s.updateGridFlag(e);if(p)return ZooCustomizeBuilderData.isRtl?t.originalPosition.left!==t.position.left?(o=Math.floor((t.position.left-1)/u),m<(a=m+r-(o=s.cols-o))&&(a=0),v=m-a,(o=r)<=0&&(o=0)):(o=Math.ceil((t.position.left+t.size.width-11)/u),(a=r-(o=s.cols-o))>c.before&&(a=c.before),o=r-a,v=m+a):((v=m-(a=(o=Math.round((t.position.left-1)/u))-r))<=0&&(v=1,a=0),o=r+a),l.attr("data-gs-x",o).removeAttr("style"),l.attr("data-gs-width",v).removeAttr("style"),void s.updateGridFlag(e);var f,v=c.x;d<t.originalSize.width?((f=Math.round((t.position.left+t.size.width-11)/u))<=v&&(f=v+1),n=c.w-(v+c.w-f)):(f=Math.ceil((t.position.left+t.size.width-11)/u),n=c.w+(f-(v+c.w)),c.x+n>c.x+c.w+c.after&&(n=c.w+c.after)),n<=0&&(n=1),l.attr("data-gs-width",n).removeAttr("style"),s.updateGridFlag(e)},getFlag:function(e){var t=e.data("gridRowFlag")||[];if(_.isEmpty(t)){for(var i=0;i<this.cols;i++)t[i]=0;e.data("gridRowFlag",t)}return t},updateGridFlag:function(e){for(var a=this,o=[],n=0;n<a.cols;n++)o[n]=0;return c(".grid-stack-item",e).each(function(e){c(this).removeAttr("style");var t=a.getX(c(this)),i=a.getW(c(this));for(n=t;n<t+i;n++)o[n]=n===t?c(this):1}),e.data("gridRowFlag",o),a.updateItemsPositions(o),a.sortGrid(e),o},addNewWidget:function(e,t){var i=this,a=i.container.find(".zoo-device-panel.zoo-panel-"+i.activePanel),t=t;_.isObject(t)||(t=a.find(".zoo-customize-builder-items").first());e.draggable({revert:"invalid",appendTo:a,scroll:!1,zIndex:99999,handle:".grid-stack-item-content",start:function(e,t){c("body").addClass("builder-item-moving"),c(".zoo-customize-builder-items",a).css("z-index",""),t.helper.parent().css("z-index",9999)},stop:function(e,t){c("body").removeClass("builder-item-moving"),c(".zoo-customize-builder-items",a).css("z-index",""),i.save()},drag:function(e,t){}}).resizable({handles:"w, e",start:function(e,t){t.originalElement.css({right:"auto",left:t.position.left})},stop:function(e,t){i.setGridWidth(t.element.parent(),t),i.save()}}),t.append(e),i.updateGridFlag(t)},addPanel:function(e){var t=this.getTemplate(),i="tmpl-zoo-customize-builder-rows";if(0!=c("#"+i).length)return _.isObject(n.rows)||(n.rows={}),'<div class="zoo-device-panel zoo-vertical-panel zoo-panel-'+e+'" data-device="'+e+'">'+t({device:e,id:n.id,rows:n.rows},i)+"</div>"},addDevicePanels:function(){var a=this;_.each(a.devices,function(e,t){var i=a.addPanel(t);c(".zoo-customize-builder-devices-switcher",a.container).append('<a href="#" class="switch-to switch-to-'+t+'" data-device="'+t+'" data-builder="'+n.id+'">'+e+"</a>"),c(".zoo-customize-builder-body",a.container).append(i)})},addItem:function(e){var t=this.getTemplate(),i="tmpl-zoo-customize-builder-item";if(0!=c("#"+i).length){i=t(e,i);return c(i)}},addAvailableItems:function(){var n=this;_.each(n.devices,function(e,a){var o=c('<div class="zoo-available-items" data-device="'+a+'"></div>');c(".zoo-panel-"+a,n.container).append(o),_.each(n.items,function(e){var t,i=!0;_.isUndefined(e.devices)||_.isEmpty(e.devices)||(_.isString(e.devices)?e.devices!=a&&(i=!1):(t=!1,_.each(e.devices,function(e){a==e&&(t=!0)}),t||(i=!1))),i&&(e=n.addItem(e),o.append(e))})})},switchToDevice:function(e,t){var i=this,a=(_.size(i.devices),c(i.container).find(".zoo-customize-builder-devices-switcher a").data("builder"));c(".zoo-customize-builder-devices-switcher a",i.container).removeClass("zoo-tab-active"),c(".zoo-customize-builder-devices-switcher .switch-to-"+e,i.container).addClass("zoo-tab-active"),c(".zoo-device-panel",i.container).addClass("zoo-panel-hide"),c(".zoo-device-panel",i.container).addClass("zoo-panel-builder-"+a),c(".zoo-device-panel.zoo-panel-"+e,i.container).removeClass("zoo-panel-hide"),i.activePanel=e,(_.isUndefined(t)||t)&&c("desktop"==e?"#customize-footer-actions .preview-desktop":"#customize-footer-actions .preview-tablet").trigger("click")},addExistingRowsItems:function(){var s=this,t=u.control(s.controlId).params.value;_.isObject(t)||(t={}),_.each(s.panels,function(o,n){var e={};_.isObject(t[n])&&(e=t[n]),_.each(e,function(e,a){_.isUndefined(e)||_.each(e,function(e,t){var i=c('.zoo-available-items[data-device="'+n+'"] .grid-stack-item[data-id="'+e.id+'"]').first();i.attr("data-gs-width",e.width),i.attr("data-gs-x",e.x),i.removeClass("item-from-list"),s.addNewWidget(i,o[a])})})}),s.ready=!0},focus:function(){this.container.on("click",".zoo-customize-builder-item-setting, .zoo-customize-builder-item-name, .item-tooltip",function(e){e.preventDefault();var t=c(this).data("section")||"",i=c(this).attr("data-control")||"",e=!1;i&&(_.isUndefined(u.control(i))||(u.control(i).focus(),e=!0)),e||t&&!_.isUndefined(u.section(t))&&(u.section(t).focus(),e=!0)}),this.container.on("click",".zoo-customize-builder-row-settings",function(e){e.preventDefault();e=c(this).attr("data-id")||"",e=n.id+"_"+e;_.isUndefined(u.section(e))||u.section(e).focus()})},remove:function(){var i=this;p.on("click",".zoo-device-panel .zoo-customize-builder-item-remove",function(e){e.preventDefault();var t=c(this).closest(".grid-stack-item"),e=t.closest(".zoo-device-panel");t.attr("data-gs-width",1),t.attr("data-gs-x",0),t.removeAttr("style"),c(".zoo-available-items",e).append(t),i.updateAllGrids(),i.save()})},encodeValue:function(e){return encodeURI(JSON.stringify(e))},decodeValue:function(e){return JSON.parse(decodeURI(e))},save:function(){var a,o=this;o.ready&&(a={},_.each(o.panels,function(e,i){a[i]={},_.each(e,function(e,t){e=_.map(c(" > .grid-stack-item",e),function(e){return e=c(e),{x:o.getX(e),y:1,width:o.getW(e),height:1,id:e.data("id")||""}});a[i][t]=e})}),u.control(o.controlId).setting.set(o.encodeValue(a)))},showPanel:function(){var t=this;this.container.removeClass("zoo-builder--hide").addClass("zoo-builder-show"),setTimeout(function(){var e=t.container.height();c("#customize-preview").addClass("cb--preview-panel-show").css({bottom:e-1,"margin-top":"0px"})},100)},hidePanel:function(){this.container.removeClass("zoo-builder-show"),c("#customize-preview").removeClass("cb--preview-panel-show").removeAttr("style")},togglePanel:function(){var t=this;u.state("expandedPanel").bind(function(e){u.panel(n.panel).expanded()?(top._current_builder_panel=s,t.showPanel()):t.hidePanel()}),t.container.on("click",".zoo-customize-builder-panel-minimize",function(e){e.preventDefault(),t.container.toggleClass("zoo-builder--hide"),t.container.hasClass("zoo-builder--hide")?c("#customize-preview").removeClass("cb--preview-panel-show"):c("#customize-preview").addClass("cb--preview-panel-show")})},panelLayoutCSS:function(){var e=c("#customize-controls").width();u.state("paneVisible").get()||(e=0),ZooCustomizeBuilderData.isRtl?this.container.find(".zoo-customize-builder-inner").css({"margin-right":e}):this.container.find(".zoo-customize-builder-inner").css({"margin-left":e})},init:function(e,t,i){var a=this,o=a.getTemplate()(n,"tmpl-zoo-customize-builder-panel");a.container=c(o),c("body .wp-full-overlay").append(a.container),a.controlId=e,a.items=t,a.devices=i,n.section&&u.section(n.section).container.addClass("zoo-hide"),a.addDevicePanels(),a.switchToDevice(a.activePanel),a.addAvailableItems(),a.switchToDevice(a.activePanel),a.drag_drop(),a.focus(),a.remove(),a.addExistingRowsItems(),u.panel(n.panel).expanded()?a.showPanel():a.hidePanel(),u.previewedDevice.bind(function(e){"desktop"===e?a.switchToDevice("desktop",!1):a.switchToDevice("mobile",!1)}),a.togglePanel(),u.state("paneVisible").get()&&a.panelLayoutCSS(),u.state("paneVisible").bind(function(){a.panelLayoutCSS()}),c(window).resize(_.throttle(function(){a.panelLayoutCSS()},100)),a.container.on("click",".zoo-customize-builder-devices-switcher a.switch-to",function(e){e.preventDefault();e=c(this).data("device");a.switchToDevice(e)}),p.trigger("zoo_builder_panel_loaded",[s,a])}};return e.init(n.control_id,n.items,n.devices),e}u.bind("ready",function(e,t){c(".zoo-range-slider")[0]&&(c(".zoo-range-slider").wrap('<div class="wrap-zoo-range-slider"></div>'),c(".wrap-zoo-range-slider").prepend('<div class="zoo-range-slider-block zoo-input-slider"></div>'),c(".wrap-zoo-range-slider").each(function(){var e=c(this).find(".zoo-range-slider").val(),i=c(this).find(".zoo-range-slider"),t=i.attr("min"),a=i.attr("max"),o=c(this).find(".zoo-range-slider-block");o.slider({range:"min",value:parseInt(e),step:1,min:parseInt(t),max:parseInt(a),slide:function(e,t){i.val(t.value).trigger("data-change"),i.trigger("change")}}),i.on("change",function(){o.slider("value",c(this).val())})})),p.on("zoo/customizer/device/change",function(e,t){c(".zoo-device-select a").removeClass("zoo-active"),"mobile"!=t?(c(".zoo-device-mobile").addClass("zoo-hide"),c(".zoo-device-general").removeClass("zoo-hide"),c(".zoo-tab-device-general").addClass("zoo-active")):(c(".zoo-device-general").addClass("zoo-hide"),c(".zoo-device-mobile").removeClass("zoo-hide"),c(".zoo-tab-device-mobile").addClass("zoo-active"))}),p.on("click",".zoo-tab-device-mobile",function(e){e.preventDefault(),p.trigger("zoo/customizer/device/change",["mobile"])}),p.on("click",".zoo-tab-device-general",function(e){e.preventDefault(),p.trigger("zoo/customizer/device/change",["general"])}),c(".accordion-section").each(function(){var e=c(this),t=c(".zoo-device-select",e).first();c(".customize-section-title",e).append(t)}),p.on("click",".zoo-devices button",function(e){e.preventDefault();e=c(this).attr("data-device")||"";c('#customize-footer-actions .devices button[data-device="'+e+'"]').trigger("click")}),p.on("change",".zoo-customize-control input:checkbox",function(e){c(this).is(":checked")?c(this).parent().addClass("zoo-checked"):c(this).parent().removeClass("zoo-checked")});function i(i){_.isUndefined(i)&&(i=!1);var a=u.get();_.each(a,function(e,t){t=u.control(t);_.isUndefined(t)||"zoo"==t.params.type&&(_.isEmpty(t.params.required)||(t.multiple_compare(t.params.required,a,i)?t.container.removeClass("zoo-hide"):t.container.addClass("zoo-hide")))})}p.ready(function(){_.each(a,function(e,t){e=e,(e=_.extend(e,o)).init()}),i(!1),p.on("zoo/customizer/value_changed",function(){i(!0)}),n.init(),p.on("click",".customize-control-zoo-styling .action--edit, .customize-control-zoo-styling .action--reset",function(e){e.preventDefault();var t,i,a,o,n=c(this).attr("data-control")||"";_.isUndefined(v[n])&&(t=u.control(n),i=_.clone(f),a=null,e=o=-1,n&&!_.isUndefined(t)&&!_.isUndefined(t.params.fields)&&_.isObject(t.params.fields)&&(_.isUndefined(t.params.fields.tabs)||(a=t.params.fields.tabs),_.isUndefined(t.params.fields.normal_fields)||(o=t.params.fields.normal_fields),_.isUndefined(t.params.fields.hover_fields)||(e=t.params.fields.hover_fields)),i.$el=c(this).closest(".customize-control-zoo-styling").eq(0),i.setupConfig(a,o,e),i.controlID=n,v[n]=i),_.isUndefined(v[n])||(c(this).hasClass("action--reset")?v[n].reset():v[n].open())}),p.on("click",".customize-control-zoo-modal .action--edit, .customize-control-zoo-modal .action--reset, .customize-control-zoo-modal .zoo-control-field-header",function(e){e.preventDefault();var t,i=c(this).attr("data-control")||"";_.isUndefined(m[i])&&(t=u.control(i),i&&!_.isUndefined(t)&&((e=_.clone(l)).config=t.params.fields,e.$el=c(this).closest(".customize-control-zoo-modal").eq(0),e.controlID=i,m[i]=e)),_.isUndefined(m[i])||(c(this).hasClass("action--reset")?m[i].reset():m[i].open())}),p.on("click",".customize-control-zoo-typography .action--edit, .customize-control-zoo-typography .action--reset",function(){var e,t,i=c(this).attr("data-control")||"";_.isUndefined(d[i])&&(e=u.control(i),i&&!_.isUndefined(e)&&((t=_.clone(r)).config=e.params.fields,t.$el=c(this).closest(".customize-control-zoo-typography").eq(0),d[i]=t)),_.isUndefined(d[i])||(c(this).hasClass("action--reset")?d[i].reset():d[i].open())}),p.on("typoFontsLoaded",function(e,l){var t=c(".zoo-actions .action--edit");t.length&&t.each(function(e){var t,i,a,o,n=c(this).attr("data-control")||"",s=u.control(n);_.isUndefined(d[n])&&("typography"===s.params.setting_type&&((o=_.clone(r)).config=s.params.fields,o.$el=s.container,o.fonts||(o.fonts=l),d[n]=o,s.container.hasClass("no-hide")&&d[n].open()),"styling"===s.params.setting_type&&(t=_.clone(f),i=null,o=a=-1,!_.isUndefined(s.params.fields)&&_.isObject(s.params.fields)&&(_.isUndefined(s.params.fields.tabs)||(i=s.params.fields.tabs),_.isUndefined(s.params.fields.normal_fields)||(a=s.params.fields.normal_fields),_.isUndefined(s.params.fields.hover_fields)||(o=s.params.fields.hover_fields)),t.$el=s.container,t.setupConfig(i,a,o),t.controlID=n,v[n]=t,s.container.hasClass("no-hide")&&v[n].open()))})})}),u.section.each(function(e){"section"!=e.params.type&&"zoo_section"!=e.params.type||e.container.find(".customize-section-description-container .customize-section-title").append('<button data-section="'+e.id+'" type="button" title="'+ZooCustomizeBuilderData.reset+'" class="customize--reset-section" aria-expanded="false"><span class="screen-reader-text">'+ZooCustomizeBuilderData.reset+"</span></button>")}),p.on("dblclick",".zoo-text-align label",function(e){var t=c(this).find('input[type="radio"]');t.length&&t.is(":checked")&&(t.removeAttr("checked"),t.trigger("data-change"))}),p.on("click",".customize--reset-section",function(e){var t,i,a;e.preventDefault(),c(this).hasClass("loading")||confirm(ZooCustomizeBuilderData.confirm_reset)&&(c(this).addClass("loading"),t=c(this).attr("data-section")||"",i=_.clone(window.location),t&&(a=[],e=u.section(t).controls(),_.each(e,function(e,t){wpcustomize(e.id).set(""),a[t]=e.id}),c.post(ajaxurl,{action:"zoo__reset_section",section:t,settings:a},function(){c(window).off("beforeunload.customize-confirm"),top.location.href=i.origin+i.pathname+"?autofocus[section]="+t+"&url="+encodeURIComponent(u.previewer.previewUrl.get())})))})}),u.bind("ready",function(e,t){_.each(ZooCustomizeBuilderData.builders,function(e,t){i(e,t)}),u.state("expandedSection").bind(function(e){c(".zoo-device-panel .grid-stack-item").removeClass("item-active"),c(".zoo-customize-builder-row").removeClass("row-active"),e&&(c('.zoo-customize-builder-row[data-id="'+e.id+'"]').addClass("row-active"),c(".zoo-device-panel .grid-stack-item.for-s-"+e.id).addClass("item-active"))})}),p.on("click",".zoo-customize-focus-button",function(e){e.preventDefault();e=c(this).attr("data-id")||"";(e=e||(e=c(this).attr("href")||"").replace("#",""))&&u.section(e)&&u.section(e).focus()}),p.on("click",".focus-control",function(e){e.preventDefault();e=c(this).attr("data-id")||"";(e=e||(e=c(this).attr("href")||"").replace("#",""))&&u.control(e)&&u.control(e).focus()}),p.on("click",".focus-panel",function(e){e.preventDefault();e=c(this).attr("data-id")||"";(e=e||(e=c(this).attr("href")||"").replace("#",""))&&u.panel(e)&&u.panel(e).focus()}),p.on("click",".save-template-form .save-builder-template",function(e){e.preventDefault();var t=c(this).closest(".customize-control"),i=c(".template-input-name",t),e=i.val();e&&""!==e&&c.post(ajaxurl,{action:"zoo_builder_save_template",name:i.val(),builder:i.attr("data-builder-id")||"",panel:i.attr("data-builder-panel")||""},function(e){e.success?(i.val(""),t.find(".list-saved-templates .li-boxed").removeClass("active-builder-template"),t.find(".list-saved-templates").prepend(e.data.li),t.find(".list-saved-templates").addClass("has-templates")):console.log("Failed")})}),p.on("click",".save-template-form .zoo-customize-import-template-button",function(e){e.preventDefault();var i,t=new FormData,a=c(this).closest(".customize-control").find(".zoo-customize-import-template-file")[0],o=c(a);a.files.length&&(e=o.data("builderPanel"),i=o.data("builderId"),t.append("panel",e),t.append("builder",i),t.append("action","zoo_builder_save_template"),t.append("zooImportTemplate","OK"),t.append("zooCustomizeTemplateFile",a.files[0]),c.ajax({url:ajaxurl,data:t,method:"POST",contentType:!1,processData:!1}).done(function(e){var t;e.success?(t=c("."+i+"_settings-saved-templates"),o.val(""),t.prepend(e.data.li),t.addClass("has-templates")):console.log("Failed")}))}),u.bind("saved",function(e){var t,i=u.state("expandedPanel").get().id;i?(t=i.replace("_settings",""),(i=c("."+i+"-saved-templates .active-builder-template")[0])?(i=c(i).data("tplId"))?c.post(ajaxurl,{action:"zoo_builder_update_template",builderId:t,templateId:i},function(e){console.log(e)}):console.log("No active builder template ID found."):console.log("No active builder template found.")):console.log("Invalid saved data. Panel not found.")}),p.on("click",".list-saved-templates .saved_template .delete-tpl",function(e){e.preventDefault();var t=c(this).parent(),i=c(this).closest(".customize-control"),e=c(".template-input-name",i);return t.hasClass("active-builder-template")?(alert("WARNING: You can not delete active template. Switch to another template before deleting it."),!1):!!confirm("Are you sure to delete this template?")&&void c.post(ajaxurl,{action:"zoo_builder_save_template",remove:t.data("tplId"),builder:e.attr("data-builder-id")||"",panel:e.attr("data-builder-panel")||""},function(e){t.remove(),i.find(".list-saved-templates li.saved_template").length<=0&&i.find(".list-saved-templates").removeClass("has-templates")})}),p.on("click",".list-saved-templates .saved_template .import-tpl, .list-saved-templates .prebuilt-tpl-item .tpl-thumbnail",function(e){e.preventDefault();var t=top.location.href,e=c(this).parent(),i=e.data("builderId");if(!confirm("Are you sure to install this template?"))return!1;c.post(ajaxurl,{action:"zoo_builder_install_template",tplId:e.data("tplId"),panelId:e.data("builderPanel"),builderId:i},function(e){e.success?-1===t.indexOf("?")?top.location.href=t+"?autofocus[section]="+i+"_templates":(t=-1!==t.indexOf("autofocus[section]=")?t.replace(/autofocus\[section\]=[^&]+/i,"autofocus[section]="+i+"_templates"):t+"&autofocus[section]="+i+"_templates",top.location.href=t):console.log(e)})}),p.on("mouseover",".zoo-customize-builder-row .grid-stack-item",function(e){var t=c(this),i=c(".zoo-customize-builder-item-remove",t).outerWidth()+c(".zoo-customize-builder-item-setting",t).outerWidth();c(".grid-stack-item-content",t).innerWidth()-50<i&&t.addClass("show-tooltip")}),p.on("mouseleave",".zoo-customize-builder-row .grid-stack-item",function(e){c(this).removeClass("show-tooltip")})}(jQuery,window);